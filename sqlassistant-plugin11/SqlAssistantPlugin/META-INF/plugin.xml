<!DOCTYPE idea-plugin PUBLIC "Plugin/DTD" "http://plugins.intellij.net/plugin.dtd">
<idea-plugin version="2" url="https://github.com/deepsky/SQL-Code-Assistant-/wiki">
    <name>SQL Code Assistant</name>
    <id>SQL</id>
    <description><![CDATA[
    <html>
    SQL Code Assistant provides extended editing capability for SQL and PL/SQL code of the Oracle database.<br>
    The database objects are always at your fingertips no matter where they came from - the database
    or sql scripts on the local File System. With the SQL Code Assistant you are able to browse the objects,
    edit and execute SQL statements, navigate over the code, search for usages in the database schema
    or scripts on the File System.<br><br>

    The plugin uses lexer and parser generated by ANTLR tool, thanks to Terence Parr (parrt@cs.usfca.edu, parrt@antlr.org).
    <br><br>
    Feature list:
    <ul>
        <li>Syntax and error highlighting</li>
        <li>Highlighting of keywords, types, system functions, table names, pl/sql varaible, etc</li>
        <li>Static code analysis (arithmetic expression evaluation, resolving references)</li>
        <li>Context aware code completion</li>
        <li>Viewing the Structure of SQL and PL/SQL code</li>
        <li>Code Navigation</li>
        <li>Quick object lookup <b>(Ctrl-Shift-O)</b></li>
        <li>Find Usages tables, views, columns, function, procedures, etc over a database schema or objects in the sql scripts on the local File System
            SQL and PL/SQL code execution with sortable query result <b>(Ctrl-Shift-M)</b></li>
        <li>Code Folding and bracket matching support</li>
        <li>Code commenting</li>
        <li>Database Schema Browsing</li>
        <li>Connection management</li>
    </ul>
    <br>

    I appreciate comments, suggestions or bug reports, thanks in advance.
    </html>
    ]]></description>
    <version>1.2.0.11</version>
    <vendor email="plsql.assistant@gmail.com"
            logo="/general/ijLogo.png"
            url="https://github.com/deepsky/SQL-Code-Assistant-">Serhiy Kulyk</vendor>

    <change-notes><![CDATA[<html>
       <ul>
            <li><b>1.2.0.11</b>
                 <ul>
                    - [NEW] Code formatter added<br>
                 </ul>
            </li>
            <li><b>1.1.4.11</b>
                 <ul>
                    - [FIX] Misbehavior after editing of connection settings in the DBBrowser<br>
                    - [FIX] Not correct value saving in the Result Panel<br>
                    - [FIX] SQL files opened in the Editor not indexed properly<br>
                    - [FIX] Minor fixes in completion<br>
                    - [NEW] "Create DDL script" added<br>
                 </ul>
            </li>
            <li><b>1.1.3.11</b>
                 <ul>
                    - [FIX] Minor issue in cache locator<br>
                 </ul>
            </li>
            <li><b>1.1.2.11</b>
                 <ul>
                    - [NEW] Performance improvements<br>
                    - [NEW] Added Quick Navigation Info for table, view, table column, function, procedure, etc<br>
                    - [NEW] JDBC driver was replaced with fresh one<br>
                    - [NEW] Added support for tablespaces: create/alter/drop (parsing and execution)<br>
                    - [FIX] QuickLookup: package scope objects were handled not correctly<br>
                    - [FIX] Some minor issues in FindUsages<br>
                 </ul>
            </li>
            <li><b>1.1.1.10</b>
                 <ul>
                     - [FIX] Word Indexer did not work properly for files opened in the Editor<br>
                     - [FIX] Validate of the VirtualFile before processing<br>
                 </ul>
            </li>
            <li><b>1.1.0.10</b>
                <ul>
                    - [NEW] Editable Result Set
                    - [NEW] SID/SERVICE_NAME access support
                    - [FIX] Indexing of Excluded folders
                </ul>
            </li>
            <li><b>1.0.3.10</b>
                <ul>
                    - [FIX] Falling performance down on big schemas<br>
                    - [FIX] Renaming/deleting issue<br>
                </ul>
            </li>
            <li><b>1.0.2.10</b>
                <ul>
                    - [FIX] Rename refactoring issues: IDEA-66451, WI-5607<br>
                    - [FIX] Autocompletion issues<br>
                    - [FIX] DBBrowser Window rendering<br>
                    - [FIX] Rendering of column values in ResultPane for types: ROWID, LONG, RAW, etc types<br>
                    - [NEW] Added posibility to run anonymous PL/SQL block<br>
                    - [NEW] Configuration page<br>
                    - [NEW] Result Pane supports opening column value in popup window<br>
                </ul>
            </li>
            <li><b>1.0.1.10</b>
                <ul>
                    - [FIX] Not stable resolving for some cases<br>
                    - [FIX] Autocompletion for group by and order by clauses<br>
                    - [FIX] Packages in the DB Browser, in case of numerous packages with the same name<br>
                    - [FIX] Parsing and indexing views for some specific cases<br>
                    - [FIX] Handling file names with non alphanumeric characters<br>
                </ul>
            </li>
            <li><b>1.0.0.10</b>
                <ul>
                    - [NEW] DB Browser is capable to replicate database objects from scripts<br>
                    - [NEW] No need active connection to browse schema objects, all objects are cached<br>
                    - [NEW] No need active connection to search for usages<br>
                    - [NEW] Support "Find Usages" for procedures, functions, packages, pl/sql variables, etc<br>
                    - [NEW] Plugin is capable to run create scripts for packages, procedure, function, etc<br>
                </ul>
            </li>
            <li><b>0.9.3.9</b>
                <ul>                 
                    - Parser became faster<br>
                    - [NEW] Added action: 'Go To Database Object' activated with <font style="font-weight: bold">Ctrl-P</font> shortcut<br>
                    - [NEW] Help Topic added<br>
                </ul>
            </li>
            <li><b>0.9.2.9</b>
                <ul>
                    - More stable release<br>
                    - [FIX] Some fixes in the SQL parser and the resolver<br>
                    - [NEW] Added highlighting of Oracle DML functions and PLSQL variables<br>
                </ul>
            </li>
            <li><b>0.9.1.x</b>
                <ul>
                    - [FIX] Many fixes in the SQL parser and the resolver<br><br>
                    - [NEW] Plugin supports enabling/disabling AutoCommit mode. Control is available in the Result Pane or in the Plugin Settings menu<br>
                    - [NEW] Go to Declaration/Go to Implementation feature is supported.<br>
                    - [NEW] Structure View Panel supports running of SQL statements from the context menu.<br>
                    - [NEW] Added hightlighting of SQLPLUS commands in the editor.<br>
                    - [NEW] Added button Refresh in the Database Browsers.<br>
                </ul>
            </li>
            <li><b>0.9.0.x</b>
                <ul>
                    - [NEW] The plugin supports Find Usages. At the moment it is implemented search usages for Tables, Views and Columns.<br>
                    Search usages available over PL/SQL packages, Triggers, Functions, Procedures, Table or View definitions, in the Database Schema Scope or Project specific scopes.<br>
                    The found usages can be grouped by file structure or usages type.<br><br>
                    - [FIX] Some fixes in the parser related to SQL syntax<br>
                </ul>
            </li>
            <li><b>0.8.4.1.x</b>
                <ul>
                    - [FIX] Fixed "Connect on Start" in the multiframe mode<br>
                    - Some minor enhancements and bug fixes<br>
                </ul>
            </li>
            <li><b>0.8.4.x</b>
                <ul>
                    - [FIX] The issue prevented plug-in from running in multiframe mode<br>
                    - [FIX] Configuration settings are made project specific<br>
                    - [FIX] "Component already disposed" error<br><br>
                    - [NEW] SQL Query can be run in the background<br>
                    - [NEW] INSERT statement validation added<br>
                    - Some minor enhancements and bug fixes<br>
                </ul>
            </li>
            <li><b>0.8.3.x</b>
                <ul>
                    - [FIX] NULL/NOT NULL column attribute for tables in the Database Browser<br>
                    - [FIX] "Component already disposed" error<br>
                    - [FIX] Connection procedure accelerated<br><br>
                    - [NEW] Enhancements in the Database Browser: it is possible to query tables/views, open view/trigger definitions, open package body and specification, create table script (not complete yet)<br>
                    - [NEW] Enhancements in the Grid: export to file supported, data/time format configurable<br>
                    - [NEW] Query Result Window is able to open several grids at the same time<br>
                    - [NEW] Query Result Window is enhanced with bookmarks which allow navigation between SQL queries typed in the editor and Query Result Panels and vice versa<br>
                    - [NEW] Added Trigger support: parsing, Structure View, resolving old/new prefixes<br>
                    - [NEW] More PL/SQL types are supported: REF CURSOR, Varray, Collection, etc<br>
                    - [NEW] SQL Code Validation options made configurable<br>
                    - [NEW] Connection procedure is enhanced with Progress Indicator. It is supported canceling or moving connecting process to background<br>
                </ul>
            </li>
        </ul>
    </html>]]></change-notes>
    <idea-version since-build="111.1" until-build="114.999"/>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <lang.parserDefinition language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlParserDefinition"/>
        <lang.syntaxHighlighterFactory key="PlSql" implementationClass="com.deepsky.lang.common.PlSqlHighlighterFactory"/>
        <lang.psiStructureViewFactory language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlStructureViewFactory"/>
        <lang.foldingBuilder language="PlSql" implementationClass="com.deepsky.lang.plsql.folding.PlSqlCodeFoldingBuilder"/>
        <lang.commenter language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlCommenter"/>
        <lang.braceMatcher language="PlSql" implementationClass="com.deepsky.lang.common.PlSqlBraceMatcher"/>
        <lang.documentationProvider language="PlSql" implementationClass="com.deepsky.lang.common.DocumentationProviderImpl"/>
        <!--<annotator language="PlSql" implementationClass="com.deepsky.lang.validation.PlSqlAnnotatingVisitor"/>-->
        <annotator language="PlSql" implementationClass="com.deepsky.lang.validation.PlSqlAnnotatingVisitorLight"/>
        <lang.ast.factory language="PlSql" implementationClass="com.deepsky.lang.plsql.resolver.factory.SqlASTFactory"/>

        <referencesSearch implementation="com.deepsky.findUsages.FindUsagesProcessor"/>
        <usageTypeProvider implementation="com.deepsky.findUsages.SqlUsageTypeProvider"/>
        <!--<fileStructureGroupRuleProvider implementation="com.deepsky.findUsages.providers.PlSqlLevel0_FileStructureGroupRuleProvider"/>-->
        <!--<fileStructureGroupRuleProvider implementation="com.deepsky.findUsages.providers.PlSqlLevel1_FileStructureGroupRuleProvider"/>-->
        <!--<fileStructureGroupRuleProvider implementation="com.deepsky.findUsages.providers.SqlStmtFileStructureGroupRuleProvider"/>-->
        <!--<usageGroupingRuleProvider implementation="com.deepsky.findUsages.SqlUsageGroupingRuleProviderImpl"/>-->
        <scopeDescriptorProvider implementation="com.deepsky.findUsages.scopes.DbScopeDescriptorProvider"/>
        <readWriteAccessDetector implementation="com.deepsky.findUsages.providers.PlSqlReadWriteAccessDetector"/>

<!--
        <enterHandlerDelegate implementation="com.deepsky.lang.plsql.formatter2.BeginEndEnterHandler"/>
-->

        <lang.formatter language="PlSql" implementationClass="com.deepsky.lang.plsql.formatter.PlSqlFormattingModelBuilder"/>
        <postFormatProcessor implementation="com.deepsky.lang.plsql.formatter.PlSqlPostFormatProcessor"/>
        <codeStyleSettingsProvider implementation="com.deepsky.lang.plsql.formatter.settings.PlSqlCodeStyleSettingsProvider"/>
        <langCodeStyleSettingsProvider implementation="com.deepsky.lang.plsql.formatter.settings.PlSqlLanguageCodeStyleSettingsProvider"/>

        <definitionsSearch implementation="com.deepsky.navigation.ImplementationsSearcher"/>
        <targetElementEvaluator language="PlSql" implementationClass="com.deepsky.navigation.PlSqlTargetElementEvaluator"/>
        <fileIconProvider implementation="com.deepsky.lang.common.FileIconProviderImpl"/>
        <completion.contributor language="PlSql" implementationClass="com.deepsky.lang.plsql.completion.ComplContributor"/>

        <codeInsight.parameterInfo language="PlSql"
                                   implementationClass="com.deepsky.lang.plsql.paraminfo.DatatypeParameterInfoHandler"/>
        <codeInsight.parameterInfo language="PlSql"
                                   implementationClass="com.deepsky.lang.plsql.paraminfo.FunctionParameterInfoHandler"/>

        <lang.fileViewProviderFactory language="PlSql"
                                      implementationClass="com.deepsky.lang.plsql.providers.PlSqlFileViewProviderFactory"/>


        <projectConfigurable implementation="com.deepsky.settings.PlSqlPluginSettingsManager"/>

        <fileTypeFactory implementation="com.deepsky.lang.common.PlSqlFileTypeLoader"/>

        <projectService serviceInterface="com.deepsky.findUsages.persistence.SqlSearchParameters"
                        serviceImplementation="com.deepsky.findUsages.persistence.SqlSearchParameters"/>

        <projectService serviceInterface="com.deepsky.settings.SqlCodeAssistantSettings"
                        serviceImplementation="com.deepsky.settings.SqlCodeAssistantSettings"/>

        <projectService serviceInterface="com.deepsky.lang.integration.CodeChangeEventAggregator"
                        serviceImplementation="com.deepsky.lang.integration.CodeChangeEventAggregator"/>

        <projectService serviceInterface="com.deepsky.view.query_pane.util.DateTimeParser"
                        serviceImplementation="com.deepsky.view.query_pane.util.DateTimeParser"/>

        <projectService serviceInterface="com.deepsky.actions.SqlScriptRunner"
                        serviceImplementation="com.deepsky.actions.SqlScriptRunService"/>
    </extensions>

    <project-components>
        <component>
            <implementation-class>com.deepsky.lang.common.PlSqlProjectComponent</implementation-class>
        </component>
        <!--
        <component>
          <implementation-class>com.intellij.lang.impl.CustomHighlighterPassFactory</implementation-class>
        </component>
        -->

        <component>
            <interface-class>com.deepsky.view.schema_pane.DbBrowserToolWindow</interface-class>
            <implementation-class>com.deepsky.view.schema_pane.tree.DbBrowserToolWindowComponent</implementation-class>
        </component>
    </project-components>

    <application-components>
        <component>
            <implementation-class>com.deepsky.lang.common.PlSqlSupportLoader</implementation-class>
        </component>
<!--
        <component>
            <implementation-class>com.deepsky.findUsages.converter.UsageConverter</implementation-class>
        </component>
-->

        <!--
        <component>
          <interface-class>com.intellij.openapi.fileEditor.impl.text.TextEditorProvider</interface-class>
          <implementation-class>com.intellij.lang.impl.PsiAwareTextEditorProvider777</implementation-class>
        </component>
-->
    </application-components>

    <!-- Component's actions -->
    <actions>

        <group id="MainMenu.ActionGroup"
                text="S_QL Assistant" description="Sql Assistant Plugin">
            <action id="ActionsSample.ActionsPlugin.ExecSQL.1" class="com.deepsky.actions.ExecuteSQLStatementAction"
                    text="Execute SQL Statement" description="Execute SQL Statement"
                    icon="/icons/exec_sql_small.png">
                <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
            </action>
            <action id="com.deepsky.navigation.GotoDbObjectAction.1" class="com.deepsky.navigation.GotoDbObjectAction"
                    text="Goto Db Object" description="Search Database Object">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift O"/>
            </action>
            <action id="com.deepsky.navigation.showParameterInfo.1" class="com.deepsky.actions.ShowParameterInfoFake"
                    text="Parameter Info" description="Parameter Info">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl P"/>
            </action>
<!--
            <action id="com.deepsky.navigation.showParameterInfo.1" class="com.deepsky.actions.ShowParameterInfoFake"
                    text="Parameter Info" description="Parameter Info">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl P"/>
            </action>
-->
            <add-to-group group-id="MainMenu" anchor="before" relative-to-action="HelpMenu"/>
        </group>

        <action id="SqlSpecificFindUsages"
                class="com.deepsky.findUsages.actions.SqlSpecificFindUsagesAction"
                text="Find Usages" description="Find Usages ...">
            <add-to-group group-id="EditorPopupMenu1" anchor="before" relative-to-action="AnalyzeMenu"/>
        </action>

<!--
todo - just for testing
        <action id="ExecSQLStmtStructurePopupAction"
                class="com.deepsky.actions.ExecSQLStmtStructurePopupAction"
                text="Execute SQL Statement" description="Execute SQL Statement ..."
                icon="/icons/exec_sql_small.png">
            <add-to-group group-id="StructureViewPopupMenu" anchor="first"/>
        </action>
        <action id="FindUsageStructureViewPopupAction"
                class="com.deepsky.findUsages.actions.FindUsageStructureViewPopupAction"
                text="Find Usages" description="Find Usages ..."
                icon="/icons/find.png">
            <add-to-group group-id="StructureViewPopupMenu"
                          anchor="after" relative-to-action="ExecSQLStmtStructurePopupAction"/>
        </action>
-->

        <!-- We use "PluginName.ComponentName.ActionName" notation for "id" to avoid conflicts -->
        <action id="ActionsSample.ActionsPlugin.ExecSQL" class="com.deepsky.actions.ExecuteSQLStatementAction"
                text="Execute SQL Statement" description="Execute SQL Statement"
                icon="/icons/exec_sql.png">
            <add-to-group group-id="MainToolBar" anchor="before" relative-to-action="HelpTopics"/>
            <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
            <!--<keyboard-shortcut first-keystroke="ctrl B" keymap="$default"/>-->
        </action>

        <action id="com.deepsky.toolwindow.OpenResultPanelAction"
                class="com.deepsky.view.query_pane.OpenResultPanelAction"
                text="Open Result Panel" description="Open Query Result Panel">
            <add-to-group group-id="GoToMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="alt 0"/>
        </action>

        <group id="Actions.ActionsPlugin.SampleGroup" text="Sample" description="Sample group">
            <!--<reference ref="ActionsSample.ActionsPlugin.ExecSQL"/>-->
            <separator/>
            <add-to-group group-id="MainToolBar" anchor="before" relative-to-action="HelpTopics"/>
        </group>

        <action id="SQLAssistant.ActionsPlugin.ExecSQL" class="com.deepsky.actions.ExecuteSQLStatementAction"
                text="Execute SQL Statement" description="Execute SQL Statement"
                icon="/icons/exec_sql_small.png">
            <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
        </action>

        <action id="SQLAssistant.ActionsPlugin.FindUsages"
                class="com.deepsky.findUsages.actions.FindUsageStructureViewPopupAction"
                text="Find Usages" description="Find Usages ..." icon="/icons/find.png">
        </action>


        <group id="SQLAssistantSV" popup="true" text="SQL Assistant">
            <reference ref="SQLAssistant.ActionsPlugin.ExecSQL"/>
            <reference ref="SQLAssistant.ActionsPlugin.FindUsages"/>
            <!--<add-to-group anchor="last" group-id="ProjectViewPopupMenu"/>-->
            <add-to-group anchor="first" group-id="StructureViewPopupMenu"/>
        </group>

<!--
        <group id="StructureView.ActionGroup"
               text="SQL Assistant" description="Sql Assistant Plugin">
            <action id="ActionsSample.ActionsPlugin.ExecSQL.2" class="com.deepsky.actions.ExecuteSQLStatementAction"
                    text="Execute SQL Statement" description="Execute SQL Statement"
                    icon="/icons/exec_sql_small.png">
                <keyboard-shortcut first-keystroke="control shift M" keymap="$default"/>
            </action>
            <action id="com.deepsky.navigation.GotoDbObjectAction.2" class="com.deepsky.navigation.GotoDbObjectAction"
                    text="Goto Db Object" description="Search Database Object">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift O"/>
            </action>
            <action id="com.deepsky.navigation.showParameterInfo.2" class="com.deepsky.actions.ShowParameterInfoFake"
                    text="Parameter Info" description="Parameter Info">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl P"/>
            </action>
            <add-to-group group-id="StructureViewPopupMenu" anchor="first"/>
        </group>
-->

    </actions>

    <helpset file="help.jar" path="/helpset.hs"/>


</idea-plugin>